@echo off\r\ntitle Instalador Silencioso do kubectl\r\n\r\necho =====================================================\r\necho  INSTALADOR SILENCIOSO DO KUBECTL\r\necho =====================================================\r\necho.\r\n\r\necho Verificando se kubectl j\\u00e1 est\\u00e1 instalado...\r\nkubectl version --short >nul 2>&1\r\nif %errorlevel% equ 0 (\r\n    echo [OK] kubectl j\\u00e1 est\\u00e1 instalado\r\n    kubectl version --short | findstr \"Client\"\r\n    echo.\r\n    echo Nenhuma a\\u00e7\\u00e3o necess\\u00e1ria.\r\n    exit /b 0\r\n)\r\n\r\necho [INFORMA\\u00c7\\u00c3O] kubectl n\\u00e3o encontrado. Iniciando instala\\u00e7\\u00e3o silenciosa...\r\n\r\necho.\r\necho Detectando arquitetura do sistema...\r\nif \"%PROCESSOR_ARCHITECTURE%\"==\"AMD64\" (\r\n    echo [OK] Arquitetura x64 detectada\r\n    set ARCH=amd64\r\n) else (\r\n    echo [ERRO] Arquitetura n\\u00e3o suportada\r\n    exit /b 1\r\n)\r\n\r\necho.\r\necho Determinando vers\\u00e3o mais recente do kubectl...\r\nrem Get the latest stable version\r\nfor /f \"delims=\" %%i in ('curl -s https://dl.k8s.io/release/stable.txt') do set KUBECTL_VERSION=%%i\r\nif \"%KUBECTL_VERSION%\"==\"\" (\r\n    echo [AVISO] N\\u00e3o foi poss\\u00edvel determinar a vers\\u00e3o mais recente, usando padr\\u00e3o\r\n    set KUBECTL_VERSION=v1.28.0\r\n)\r\n\r\necho Vers\\u00e3o selecionada: %KUBECTL_VERSION%\r\n\r\necho.\r\necho Baixando kubectl...\r\nset DOWNLOAD_URL=https://dl.k8s.io/release/%KUBECTL_VERSION%/bin/windows/%ARCH%/kubectl.exe\r\necho URL de download: %DOWNLOAD_URL%\r\n\r\nrem Create temp directory\r\nset TEMP_DIR=%TEMP%\\kubectl_install\r\nif not exist \"%TEMP_DIR%\" mkdir \"%TEMP_DIR%\"\r\ncd /d \"%TEMP_DIR%\"\r\n\r\nrem Download kubectl using curl (available on Windows 10/11)\r\ncurl -L -o kubectl.exe %DOWNLOAD_URL%\r\nif %errorlevel% neq 0 (\r\n    echo [ERRO] Falha ao baixar kubectl usando curl\r\n    echo Tentando m\\u00e9todo alternativo...\r\n    \r\n    rem Try PowerShell if curl fails\r\n    powershell -Command \"Invoke-WebRequest -Uri '%DOWNLOAD_URL%' -OutFile 'kubectl.exe'\"\r\n    if %errorlevel% neq 0 (\r\n        echo [ERRO] Falha ao baixar kubectl usando PowerShell\r\n        exit /b 1\r\n    )\r\n)\r\n\r\nif not exist \"kubectl.exe\" (\r\n    echo [ERRO] kubectl.exe n\\u00e3o encontrado ap\\u00f3s download\r\n    exit /b 1\r\n)\r\n\r\necho [OK] kubectl baixado com sucesso\r\n\r\necho.\r\necho Instalando kubectl no PATH do sistema...\r\necho Copiando para C:\\Windows\\System32\\...\r\ncopy kubectl.exe \"C:\\Windows\\System32\\\" >nul 2>&1\r\nif %errorlevel% neq 0 (\r\n    echo [ERRO] Falha ao copiar para C:\\Windows\\System32\\\r\n    echo Tentando copiar para C:\\Windows\\...\r\ncopy kubectl.exe \"C:\\Windows\\\" >nul 2>&1\r\n    if %errorlevel% neq 0 (\r\n        echo [ERRO] Falha ao copiar para C:\\Windows\\\r\n        echo Tentando adicionar ao PATH do usu\\u00e1rio...\r\n        \r\n        rem Add to user PATH\r\n        setx PATH \"%PATH%;%TEMP_DIR%\" >nul 2>&1\r\n        if %errorlevel% neq 0 (\r\n            echo [ERRO] Falha ao adicionar ao PATH\r\n            exit /b 1\r\n        ) else (\r\n            echo [OK] kubectl adicionado ao PATH do usu\\u00e1rio\r\n            echo Voc\\u00ea precisar\\u00e1 reiniciar o prompt de comando para usar o kubectl\r\n        )\r\n    ) else (\r\n        echo [OK] kubectl copiado para C:\\Windows\\\r\n    )\r\n) else (\r\n    echo [OK] kubectl copiado para C:\\Windows\\System32\\\r\n)\r\n\r\necho.\r\necho Verificando instala\\u00e7\\u00e3o...\r\nkubectl version --short >nul 2>&1\r\nif %errorlevel% equ 0 (\r\n    echo [SUCESSO] kubectl instalado e funcionando corretamente!\r\n    kubectl version --short | findstr \"Client\"\r\n) else (\r\n    echo [AVISO] kubectl foi copiado, mas pode haver problemas de permiss\\u00e3o\r\n    echo Tente reiniciar o prompt de comando e executar: kubectl version\r\n)\r\n\r\necho.\r\necho Limpando arquivos tempor\\u00e1rios...\r\ncd /d \"%TEMP%\"\r\nrmdir /s /q \"%TEMP_DIR%\" >nul 2>&1\r\n\r\necho.\r\necho =====================================================\r\necho INSTALA\\u00c7\\u00c3O SILENCIOSA CONCLU\\u00cdDA\r\necho =====================================================\r\necho.\r\necho kubectl foi instalado automaticamente!\r\nexit /b 0