@echo off\r\ntitle Instalador Silencioso do kubectl (Método Oficial)\r\n\r\necho =====================================================\r\necho  INSTALADOR SILENCIOSO DO KUBECTL (Método Oficial Windows)\r\necho =====================================================\r\necho.\r\n\r\necho [INFO] Iniciando instalação silenciosa do kubectl...\r\necho [INFO] Usando método oficial da documentação do Kubernetes\r\n\r\necho.\r\necho [1/6] Verificando se kubectl já está instalado...\r\nkubectl version --client >nul 2>&1\r\nif %errorlevel% equ 0 (\r\n    echo [OK] kubectl já está instalado\r\n    for /f \"delims=\" %%i in ('kubectl version --client') do set KUBECTL_VERSION=%%i\r\n    echo Versão atual: %KUBECTL_VERSION%\r\n    echo.\r\n    echo Nenhuma ação necessária.\r\n    exit /b 0\r\n)\r\n\r\necho [INFO] kubectl não encontrado. Iniciando instalação...\r\n\r\necho.\r\necho [2/6] Criando diretório temporário...\r\nset TEMP_DIR=%TEMP%\\kubectl_install_%RANDOM%\r\nif not exist \"%TEMP_DIR%\" mkdir \"%TEMP_DIR%\"\r\ncd /d \"%TEMP_DIR%\"\r\necho Diretório temporário: %TEMP_DIR%\r\n\r\necho.\r\necho [3/6] Baixando kubectl v1.30.0 (método oficial)...\r\necho Baixando kubectl.exe...\r\ncurl -LO https://dl.k8s.io/release/v1.30.0/bin/windows/amd64/kubectl.exe\r\nif %errorlevel% neq 0 (\r\n    echo [ERRO] Falha ao baixar kubectl.exe\r\n    echo Tentando versão estável mais recente...\r\n    curl -LO https://dl.k8s.io/release/stable/bin/windows/amd64/kubectl.exe\r\n    if %errorlevel% neq 0 (\r\n        echo [ERRO] Falha ao baixar versão estável\r\n        exit /b 1\r\n    )\r\n)\r\n\r\necho.\r\necho [4/6] Verificando integridade do arquivo...\r\necho Baixando hash de verificação...\r\ncurl -LO https://dl.k8s.io/release/v1.30.0/bin/windows/amd64/kubectl.exe.sha256\r\nif %errorlevel% neq 0 (\r\n    echo [AVISO] Não foi possível baixar o hash de verificação\r\n    echo Continuando sem verificação de integridade...\r\n) else (\r\n    echo Verificando hash...\r\n    CertUtil -hashfile kubectl.exe SHA256 | findstr /i /v \"certutil\" > kubectl.exe.sha256.local\r\n    fc kubectl.exe.sha256 kubectl.exe.sha256.local >nul\r\n    if %errorlevel% equ 0 (\r\n        echo [OK] Hash verificado com sucesso\r\n    ) else (\r\n        echo [AVISO] Hash não corresponde - continuando com cautela\r\n    )\r\n)\r\n\r\necho.\r\necho [5/6] Instalando kubectl...\r\necho Criando diretório C:\\kubectl...\r\nif not exist \"C:\\kubectl\" mkdir \"C:\\kubectl\"\r\n\r\necho Movendo kubectl.exe para C:\\kubectl...\r\nmove kubectl.exe \"C:\\kubectl\\\" >nul\r\nif %errorlevel% neq 0 (\r\n    echo [ERRO] Falha ao mover kubectl.exe para C:\\kubectl\r\n    exit /b 1\r\n)\r\n\r\necho.\r\necho [6/6] Adicionando ao PATH...\r\necho Adicionando C:\\kubectl ao PATH temporário...\r\nset PATH=%PATH%;C:\\kubectl\r\n\r\necho Adicionando C:\\kubectl ao PATH do sistema (permanente)...\r\nsetx PATH \"%PATH%;C:\\kubectl\" >nul 2>&1\r\nif %errorlevel% neq 0 (\r\n    echo [AVISO] Não foi possível adicionar ao PATH do sistema\r\n    echo Você pode precisar adicionar manualmente C:\\kubectl ao PATH\r\n)\r\n\r\necho.\r\necho Verificando instalação...\r\nkubectl version --client >nul 2>&1\r\nif %errorlevel% equ 0 (\r\n    echo [SUCESSO] kubectl instalado com sucesso!\r\n    for /f \"delims=\" %%i in ('kubectl version --client') do set KUBECTL_VERSION=%%i\r\n    echo Versão instalada: %KUBECTL_VERSION%\r\n) else (\r\n    echo [ERRO] Falha ao verificar instalação do kubectl\r\n    echo O arquivo foi copiado para C:\\kubectl\\kubectl.exe\r\n    echo Adicione C:\\kubectl ao PATH manualmente se necessário\r\n    exit /b 1\r\n)\r\n\r\necho.\r\necho Limpando arquivos temporários...\r\ncd /d \"%TEMP%\"\r\nrmdir /s /q \"%TEMP_DIR%\" >nul 2>&1\r\n\r\necho.\r\necho =====================================================\r\necho INSTALAÇÃO SILENCIOSA CONCLUÍDA COM SUCESSO!\r\necho =====================================================\r\necho.\r\necho kubectl foi instalado em: C:\\kubectl\\kubectl.exe\r\necho O diretório foi adicionado ao PATH do sistema\r\necho.\r\necho Para usar o kubectl, abra um novo prompt de comando ou PowerShell\r\necho.\r\nexit /b 0